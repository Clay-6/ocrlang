# Changelog

All notable changes to this project will be documented in this file.

## [1.3.0] - 2025-03-12

### Bug Fixes

- Persist expression db through multiple `run`s
- Show proper errors for imported files
- Allow function calls in lhs of a binary expression
- Handle out-of-bounds array index assignment
- Enforce homogeneous-type arrays
- Enforce array homogeneity in literal assignments

### Features

- Add `import` statements
- Add `-c` to run a single line without the REPL
- Allow exiting REPL with `quit` or `quit()`

### Miscellaneous Tasks

- Migrate to 2024 edition
- Update deps
- Update CI testing workflow
- Update `cargo-dist` things

### Refactor

- Remove `range` field from `InterpretError::LexError`
- Lessen `unreachable!()` abuse where possible

## [1.2.0] - 2023-11-17

### Bug Fixes

- Expand parser recovery set to all statement boundaries
- Remove potential panics
- Allow int/float comparisons in `==`
- Improve error output
- Change `LexError` display impl
- Use `try_fold` to not swallow fmt errors
- Persist expr span info through the HIR

### Features

- Do type-checking in `==` implementation
- Report line/column info for lex errors
- Display line/column info for parse errors
- Display line/column info for all errors
- Retain span info for both exprs and statements

### Miscellaneous Tasks

- Run all tests regardless of failures
- Update `actions/checkout` to v4

### Refactor

- Move builtin function impls into separate module
- Switch to using `clap` for args parsing
- Change args to `exec_for_loop`

### Styling

- Apply some pedantic lints
- Set max line width to 80 cols

## [1.1.0] - 2023-11-01

### Bug Fixes

- Pop env after for-loop completes
- Remove trait bounds directly on `Interpreter` struct
- Don't panic on interpreter errors in the REPL
- Call `color_eyre::install` (yay colours!)

### Features

- Add `rustyline` for REPL
- Add real CLI args parsing with `argh`
- Return value from `Interpreter::run`
- Print out non-unit evaluated values in REPL

### Refactor

- Use `Interpreter::default` in main binary
- Just return result of `Interpreter::run`
- Remove unused `Interpreter::env()`

## [1.0.0] - 2023-10-30

Initial release. Contains support for all fetures mentioned in the spec:

- Comparison, boolean, & logical operators
- Comments
- Assignment
  - Constants & globals
- Input & Output
- Type casting
- Control flow
  - For loops
  - While loops
  - If statements
  - Switch statements
- String operations
  - Length
  - Upper/Lowercase
  - Substrings
  - Ascii conversion
- File Handling
  - Opening/closing files
  - Reading/writing lines
  - Creating files
  - Checking for EOF
- Arrays
  - Declaration
  - Assignment
  - Indexing
- Subprograms
  - Declaring functions/procedures
  - Calling functions/procedures
- Random number generation

<!-- generated by git-cliff -->
[1.0.0]: https://github.com/Clay-6/ocrlang/releases/tag/v1.0.0
[1.1.0]: https://github.com/Clay-6/ocrlang/releases/tag/v1.1.0
[1.2.0]: https://github.com/Clay-6/ocrlang/releases/tag/v1.2.0
